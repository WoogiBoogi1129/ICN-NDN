# NDN에서 Off-Path 콘텐츠 접근기법들에 대한 성능 비교 연구
## 이준석, 김도형."NDN에서 Off-Path 콘텐츠 접근기법들에 대한 성능 비교 연구"정보처리학회논문지. 컴퓨터 및 통신시스템10,12(2021):319-328.
### 서론
- 최근 노드들의 위치정보를 기반으로한 통신 방법이 대용량의 콘텐츠를 공유하는 서비스를 제공하는 현재 인터넷 형태와는 적합하지 않다는 의견이 제시되고 정보중심네트워크(Information Centric Network, ICN)이 제안되었다.


- ICN은 Interest패킷과 Data패킷으로 구성되어 위치 정보가 아닌 콘텐츠의 이름을 통해 통신이 이루어지는 형태이다.


- 또한 ICN은 네트워크 계층 내에 캐싱 기능을 포함하여 거리가 먼 콘텐츠 서버보다 가까운 인접 노드에 캐싱되어 있는 데이터를 제공받을 수 있다는 효율성이 있다.


- ICN의 핵심적인 이점은 '얼마나 캐시를 잘 활용할 수 있느냐'에 따라 서비스의 질이 결정된다.


- 캐시를 잘 활용하기 위해 ICN 환경 내에서 중복된 데이터를 줄이고 캐싱을 효율적으로 수행할 수 있는 다양한 방법들이 제안되었다. 하지만 제안된 캐싱 기법들은 모두 라우팅 경로 상에 존재하는 노드들에게 캐싱을 하는 방식이기 때문에 인접 노드들의 캐시 공간을 사용할 수 없어 전체 네트워크적인 측면에서는 효율적인 캐싱이 이루어지지 않는다는 문제점이 발생했다.


- 위와 같은 문제점을 해결하기 위해 라우팅 경로 밖의 캐시에 저장되어 있는 콘텐츠를 활용하기 위한 'Off-Path'기법들이 제안되었다. Off-Path들은 두가지 기법으로 나뉜다.
    - Proactive 기법
        - 캐시의 카탈로그를 네트워크에 전파하여 라우팅 경로의 다변화를 가져오는 방식이다.


    - Reactive 기법
        - Interest를 수신할 때 라우터가 Interest를 복사하여 여러 네트워크 인터페이스로 내보내어 네트워크 캐시에 저장되어 있는 목표 콘텐츠를 찾는 방식이다.
### Preliminaries
- Routing in NDN
    - NDN 개념
        - NDN이란 콘텐츠의 이름 정보와 위치 정보를 매핑시켜주는 별도의 중앙집권적 서버를 도입하지 않은 대표적인 분산형 ICN 아키텍쳐이다.


    - NDN에서의 통신 방법
        1. 사용자가 원하는 콘텐츠의 이름이 담긴 Interest 패킷을 전송한다.
        2. Interest 패킷을 수신한 라우터는 CS(Content Store)라는 로컬 캐시에서 Interest 패킷 이름 정보와 일치하는 데이터가 존재하는지 확인한다.
        3. CS에 해당 콘텐츠가 존재하면 Interest를 수신했던 인터페이스로 Data 패킷을 전송한다.
        4. 만약 콘텐츠가 CS에 존재하지 않을 경우, PIT(Pending Information Table)에 Interest와 Interest를 수신한 인터페이스를 기록한다.
        5. 이후 FIB(Forwarding Information Base)라는 라우팅 테이블을 통해 다음 라우터로 Interest를 전송한다.
        6. 콘텐츠를 라우터가 응답할 때에는 PIT에 기재된 경로를 역으로 거슬러 올라가 전송을 진행한다.
        7. 전송을 진행하기 전, 콘텐츠를은 각 라우터의 CS에 저장된다.
        8. 만약 PIT에 기록되어있는 Interest와 일치하는 Data가 없다면 해당 Data는 드롭시킨다. (요청하지 않은 데이터가 돌아오는 것이기 때문에 보안상의 문제라 판단할 수 있기 때문이다.)


- Caching in NDN
    - NDN에서의 캐싱 이점
        1. 동일한 콘텐츠가 같은 링크상에서 중복해서 전달됨으로써 발생될 수 있는 비효율적인 링크 사용을 피할 수 있다.
        2. 콘텐츠가 전달되는 시간이 줄어듦에 따라 서비스 품질이 향상될 수 있다.
        3. 사용자 요청들이 서버가 아닌 네트워크 상의 캐시들로부터 서비스될 수 있기 때문에 콘텐츠 제공자 측의 서비스 인프라 확장성에 도움을 줄 수 있다.


    - NDN에서 캐싱의 효율성을 높이기 위해 제안된 방법들
        - 확률 기반 캐싱 기법
        - 콘텐츠 제공자 도움형 캐싱 기법
        - 콘텐츠 서버까지의 거리를 고려한 캐싱 기법
        - 1/홉 수의 확률을 정용하여 콘텐츠를 캐싱하는 기법
        - 경로 상 가장 마지막 라우터의 캐시에만 콘텐츠를 저장하는 기법
        - 소비자에게 가까워질 수록 더 높은 확률을 적용하여 캐싱하는 기법


### Access schemes for Off-path Cached Content in NDN
- Off-Path의 문제점
    - NDN 기본 라우팅 기법에서의 Interest는 경로 상의 라우터에만 캐싱될 수 있다. 이러한 점은 경로 외의 인접 노드에 캐시 데이터가 존재한다고 해도 접근할 수 없다는 의미이다.


- Off-Path의 문제점을 해결하기 위한 방법
    - 경로 외에 위치한 캐시를 활용할 수 있도록 Off-Path 캐시에 저장된 콘텐츠에 엑세스하는 기법이 제안되었다.
        - Proactive
            - 각각의 라우터들이 주기적으로 주변 라우터들의 캐시에 저장되어 있는 콘텐츠 정보를 파악한다.
            - 주변 라우터 콘텐츠 정보를 통해 Interest 수신 시, 해당 콘텐츠가 캐싱되어 있는 라우터로 Interest를 포워딩한다.
        - Reactive
            - 수신한 Interest를 복사하여 여러 인터페이스로 전송한다.


- Proactive Schemes
    - 캐싱 과정
        1. 각 라우터들은 로컬 캐시에 저장되어 있는 콘텐츠 정보들을 주변 라우터들에게 주기적으로 플로딩한다.
        2. 플로딩 받은 정보들을 바탕으로 Interest를 수신한 라우터는 캐싱된 데이터가 있는 라우터에게 Interest를 포워딩할 수 있다.


    - Proactive 기법의 단점
        - 캐시 카탈로그를 플로딩하는 과정에서 네트워크 대역폭을 크게 소모할 수 있다.
        - 플로딩 이벤트 사이 캐시에서 콘텐츠가 사라질 경우, Interest가 존재하지 않는 콘텐츠 쪽으로 포워딩될 수 있다.
        - 주변 캐시정보들을 받아 처리하는 과정에서 오버헤드가 발생할 수 있다.


    - Proactive 기법 종류
        - Intra-AS Cooperative Caching
            - 개요
                - 동일한 콘텐츠가 AS(Autonomous System) 내의 라우터들 사이에서 여러 번 중복해서 저장되는 것을 막기위해 등장했다.


            - 특징
                - 라우터가 같은 AS 내의 이웃 라우터들에 저장된 콘텐츠 정보를 파악할 수 있다는 점을 통해 Interest는 Off-Path 캐시에 저장되어 있는 콘텐츠에 대한 접근이 가능해진다.
                - 정보 교환의 범위를 AS 내로 제한함으로써 정보 교환에 따른 오버헤드를 줄일 수 있다.
                - 정보 교환 과정에서 지연을 최소화할 수 있다.

            
        - Hashing to Map Content Names to Router
            - 개요
                - 콘텐츠의 이름을 Hashing 하여 그 결과에 따라 지정된 라우터에 콘텐츠를 저장하는 방법이다.

            
            - 특징
                - 라우터가 Interest를 수신하면 Interest에 기록된 콘텐츠 이름으로 Hashing을 수행하여 그 결과값에 따라 특정 라우터 쪽으로 Interest 경로를 설정하여 Off-Path 캐시에 저장되어 있는 콘텐츠에 점근할 수 있다.
                - 라우터들 간의 콘텐츠 정보를 교환하지 않아도 Off-Path 캐시에 접근할 수 있다.
                - 여러 라우터들 간의 조직화 과정이 별도로 필요하다.
                - Hashing 과정에서 콘텐츠의 인기도 및 다양한 특성들이 반영되기 어렵다.

        
        - Bloom Filter Based Information Exchange
            - 개요
                - Bloom Filter를 사용하여 캐시된 콘텐츠 정보를 교환한다.
                    - Bloom Filter란?
                        - 해싱 함수들을 사용한 확률형 자료 구조


            - 특징
                - Bloom Filter 사용 시, 캐시정보 전달과정에서 발생할 수 있는 오버헤드를 최소화할 수 있다.
                - Bloom Filter 사용 시, false positive, false negative가 발생할 수 있는데 해당 경우, 콘텐츠들에 대한 정확한 정보 전달이 어려울 수 있다.


- Reactive Schemes
    - 캐싱 과정
        - 라우터들이 수신한 Interest를 복사하여 여러 인터페이스로 내보낸다.
    

    - Reactive 기법 종류
        - Exploration and Exploitation
            - 개요
                - FIB를 사용하여 Interest를 서버 쪽으로 전송하는 기본 라우팅 기법 이외에 Interest를 플로딩해서 Off-Path 캐시에 저장되어 있는 콘텐츠를 찾는 방법이다.

                
            - 특징
                - 인기도가 높은 콘텐츠는 주변 캐시에 저장되어 있을 확률이 높기 때문에 Interest를 플로딩하여 콘텐츠를 주변 캐시에서 탐색한다.
                - 인기도가 낮은 콘텐츠는 FIB를 활용하는 NDN 기본 라우팅 방법을 사용한다.
                - 해당 방법들을 FIB의 크기를 줄일 수 있다.
                - 인기 없는 콘텐츠에 대한 Exploration 과정에서 발생할 수 있는 리소스 낭비를 줄일 수 있다.


        - INFORM
            - 개요
                - Exploration 과정에서 모든 인터페이스로 Interest를 플로딩할 경우, 오버헤드가 발생할 수 있다. 해당 문제를 해결하기 위해 기존 경로 상의 인터페이스 이외 추가적으로 하나의 인터페이스만 무작위로 선택하여 Interest 복사본을 전송하는 새로운 Exploration 기법이다.


            - 특징
                - Exploration 과정에서 수집된 정보를 바탕으로 콘텐츠별 최적 경로를 업데이트하고 해당 최적 경로를 다음번 Exploration을 수행할 때까지 사용한다.
                - Interest를 전송하여 Response를 받기까지의 시간(RTT)을 기반으로 Q값을 게산하여 테이블에 저장한다.
                - 해당 기법 또한 여전히 Exploration 과정에서 Interest의 중복 전송이 발생하게 된다.


        - D-FIB
            - 개요
                - 콘텐츠를 사용자 방향으로 전달하면서 사용자 측 방향, 즉 콘텐츠가 전달된 방향을 테이블에 기록한다. 그 이후, 해당 콘텐츠에 대한 Interest를 수신할 경우, 테이블에 기록된 방향 쪽으로 Interest를 전송하여 캐시된 콘텐츠를 찾게 된다.

            
            - 특징
                - FIB로 설정된 기존 경로 이외 D-FIB에 기록된 추가적인 경로들로도 Interest가 전송되어 중복된 데이터 전송이 발생할 수 있다.
                - 전달되는 콘텐츠 정보를 테이블에 기록하면서 스토리지 오버헤드가 발생할 수 있다.


        - DIVER
            - 개요
                - Exploration 과정에서 발생하는 콘텐츠 중복전송 문제를 해결하기 위해서 등장했다.
                - Meta-Request를 사용한다.
            

            - 특징
                - Exploration 과정에서 중복전송이 발생하는 이유
                    - Interest 복사본이 여러 인터페이스로 전송되기 때문이다.
                - Interest 대신 Meta-Interest를 전송하여 Interest를 전송하고 만약 해당 콘텐츠가 존재할 경우, GBF(Generalized Bloom Filter)를 사용하여 해당 콘텐츠들의 정보를 응답 메시지에 담아 전송한다.
                - Meta-Interest를 전송하여 주변 캐시의 콘텐츠 정보를 수집하기 때문에 콘텐츠의 중복 전송을 발생시키지 않는다.
                - GBF를 사용하여 정보 교환과정에서의 메시지 오버헤드 문제를 최소화할 수 있다.
                - GBF 관련 연산을 수행하기 위해서는 추가적인 오버헤드가 발생할 수 있다.


        - Network-coding enabled NDN
            - 개요
                - 네트워크 코딩 기법을 적용한 엑세스 기법이다.
                - 네트워크 노드들이 동일한 콘텐츠에 속한 여러 Chunk에 대해 코딩 기법을 적용하여 Encoded Block을 생성한다.


            - 특징
                - 사용자는 콘텐츠를 구성하는 Chunk가 아닌 Block 단위로 Interst를 보낸다.
                - 사용자가 가진 Encoded Block의 정보를 이용하여 라우터들이 Encoded Block을 제공하기 때문에 여러 라우팅 경로를 통해 Encoded Block이 중복되는 것이 아니라 데이터 중복현상을 최소화할 수 있다.
                - Encoded Block을 생성하는 과정에서 큰 컴퓨팅 오버헤드가 발생할 수 있다.
                - 콘텐츠 Chunk들을 순서대로 필요로 하는 Streaming 서비스 등에서는 Encoded Block 방식이 적합하지 않을 수 있다.


### Discussion & Conclusion
- Interest를 복사하여 기존 라우팅 경로 및 주변 캐시로 모두 전송하는 형태의 Proactive 기법이 캐시된 콘텐츠를 가장 많이 활용할 수 있는 방법이다.
- 하지만, Interest 중복 전송에도 불구하고 교환된 정보의 유효성 문제로 Interest 재전송이 발생한다는 점과 Interest 복사에 따른 컨텐츠 중복 전송이 불가피하다는 한계가 있다.


- Proactive 기법에서는 교환된 정보의 유효성을 효과적으로 보장하는 방법이 제안되어야 한다.
- Reactive 기법에서는 Interest 복사본을 최소로 생성하고 효율적으로 캐시된 콘텐츠를 찾도록하는 방법이 필요하다.