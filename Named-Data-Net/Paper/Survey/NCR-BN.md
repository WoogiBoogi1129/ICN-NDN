# Neighbor Caching Region Strategy with Backbone Node (NCR-BN) 정리
## 서론
- NDN 환경은 일반적으로 콘텐츠의 이동 경로를 따라 캐싱을 진행하는 형태를 띄고 있다. (On-Path)
- On-Path 캐싱 방식은 사용자가 콘텐츠 요청 시, 경로 상의 캐시를 통해 요구 콘텐츠를 충족할 가능성이 높다. 하지만, 외부 경로 상의 캐시 공간을 사용(Off-Path)한다면 전체 네트워크 상의 캐시 공간을 효율적으로 사용할 수 있어 Off-Path 방식의 이점을 고려하는 것도 중요하다.
- Off-Path 기반의 캐싱 기법도 제안되고 있다.
    - Muncc: Multi-hop neighborhood collaborative caching in information–entric networks
        - Bloom Filter를 사용하여 인접한 노드의 캐시를 사용하는 방식이다.

    - Intra-AS
        - 자율 시스템 내의 캐싱을 사용하는 방식이다.

    - Off-Path 캐시 전략의 최종 목표는 온패스 캐시의 중복성을 줄이고 콘텐츠 전송의 효율성을 개선하기 위함이다.


- 여러 제약 조건에 따른 최적 배치 문제
    - 각 노드에 콘텐츠를 배치할 때 아래와 같은 정보들을 필요로 한다.
        - 네트워크 토폴로지
        - 콘텐츠의 인기도
        - 모든 노드의 캐시 정보
    
    - 종합적으로 전체 네트워크 정보와 콘텐츠의 인기도를 활용하여 캐싱을 진행해야한다.
    - 하지만, 전체 네트워크 정보를 고려하면 아래와 같은 문제가 발생할 수 있다.
        - 정보 수집 과정에서 발생하는 막대한 오버헤드
        - 동적 네트워크 환경 정보를 실시간으로 수집하기 어려움

    - 캐싱 배치 문제를 해결하기 위해 일반적으로 Neighbor Cooperative 전략을 사용한다.
    - Neighbor Cooperative 전략이란?
        - 이웃 노드 간의 협력을 통해 오버헤드를 줄이는 방법이다.

    - Neighbor Cooperative 전략은 글로벌 정보를 수집하고 계산하는 데 드는 오버헤드를 줄이는 데 도움이 될 수 있다. 대신 노드는 주변 노드와 정보를 공유하여 배치 결정을 내릴 수 있습니다.

    - Neighbor Cooperative 전략을 채택함으로써 노드는 네트워크 환경의 동적 특성도 고려할 수 있다.즉, 네트워크 토폴로지 및 콘텐츠 인기도 변화에 따라 배치 결정을 조정할 수 있습니다.

## 본론
- NCR-BN 개요
    - 이웃 캐싱 영역 (Neighbor Caching Region)을 지정하여 캐싱을 진행하는 기법을 사용한다.
    - 노드의 계층적 관계에 따라 NCR 안에서 백본 노드(Back Bone Node)로 선택하여 캐시 교체를 진행합니다.
    - 백본 노드를 사용하지 않는다면 일반 NCR 노드와 같아 성능 저하로 이어집니다.
    - NCR의 각 캐시 노드들은 캐시 콘텐츠 정보들을 원홉 이웃노드들에게 전달하여 NCR의 모든 노드가 전체 캐시 정보를 유지합니다.
    - 백본 노드는 선택 알고리즘을 사용하여 네트워크 가장자리부터 단계별로 채택된다.


    ![image](https://github.com/WoogiBoogi1129/ICN-NDN-Study/assets/110087545/15032a7a-e2d3-4e6e-9ad8-8e9b9170732b)
    - 파란 노드 = 엣지 노드
    - 빨간 노드 = 백본 노드
    - 백본 노드는 한 단계 하위 노드들과 NCR을 형성한다.
    - 백본 노드는 NCR을 기반으로 하므로 하나의 노드가 백본 노드 역할을 할 수도 있고 일반 노드가 될 수도 있다.
    - 네트워크 상의 엣지 노드를 제외한 모든 노드들은 백본 노드가 된다.
    - 해당 전략에서 아래와 같은 두가지 문제점을 보완하여 성능을 향상시킵니다.
        - NCR 내에서 캐시 정보 공유 문제
        - NCR 내에서 캐시 교체 문제

- 캐시 정보 공유
    - NCR-BN 전략 구성도


    ![image](https://github.com/WoogiBoogi1129/ICN-NDN-Study/assets/110087545/43dae89f-10ea-4c3e-9e75-3364d55c93f5)


    - Interest Packet을 분리
        - Interest Packet에 필드를 추가하여 일반 관심 패킷과 메신저 관심 패킷(MIP)으로 분리함
        - NCR 노드는 MIP를 주기적으로 주위 한 홉 노드에게 전송하여 캐시 정보를 공유함
        - 모든 노드들은 지역 노드들의 캐시 정보 테이블(CITRN)을 유지 및 관리함
            - CITRN은 콘텐츠 이름과 인터페이스의 쌍으로 구성되어 있다.


- 캐시 교체
    - NDN의 기본 캐시 교체 정책은 LRU를 사용하는데 해당 경우, 콘텐츠의 인기도를 고려하지 않아 캐시 활용도가 떨어질 수 있다.
    - 해당 문제를 해결하기 위해서 NCR-BN은 NCR 내에서의 콘텐츠 인기도를 고려하고, MPTRN 표를 활용하여 최소 인기도 정보를 공유한다.
    - 캐시 교체 발생 시, MPTRN 표를 사용하여 가장 낮은 로컬 인기도와 비교하여 교체를 진행한다.

    
## 결론